# 项目介绍

---

该项目首先是一个网络聊天服务器的项目，项目在单机模式下主要有以下结果模块，分别是网络层、服务层、数据存储层、

1. 网络模块采用的是muduo库、性能非常强的开源的网络库来进行设计的，使用开源网络库的好处就是解耦了网络模块代码与业务模块代码，可以更加专注于业务模块的开发。
2. 在服务层业务逻辑实现方面，使用了一些C++11的技术，如利用map、bind绑定器实现了一个消息id、与消息发生之后对应业务逻辑操作的绑定，相当于实现了一个回调机制，当网络IO检测到一个消息请求时，从该请求消息中解析json数据、得到一个消息id、根据消息id去调用相应的业务处理方法。
3. 在数据存储层使用了mysql来存储项目上的一些关键的数据，比如用户的账号、好友的列表、群组的列表关系、离线的消息、这些信息都是在mysql中进行存储
4. 单机服务下主要就是以上的几个模块，由于在单机服务下系统的并发能力是有限的，所以为了提升系统的并发能力，将项目做了一个多机的扩展，通过将系统部署在多台服务器上，并利用nginx负载均衡进行客户端请求的分发，来提升系统的并发量。本项目主要是基于tcp长连接私有协议搭建的cs架构的通信系统，所以负载均衡时也需要做基于tcp长连接，
5. 由于消息聊天通信，客户端不仅仅需要向服务器主动发送消息，服务器也需要主动向客户端推送消息，这就决定了系统必须使用tcp的长连接，采用短连接则服务器无法向客户端推送消息，
6. 考虑到在多机部署之后，不同聊天服务器上登录的用户之间也需要通信， 所以引入了redis作为mq消息队列的功能，利用redis的发布订阅功能实现了跨服务器的消息通信功能，
